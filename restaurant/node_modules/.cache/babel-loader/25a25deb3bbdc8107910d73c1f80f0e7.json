{"ast":null,"code":"import axios from \"axios\";\nimport { REGEX_HOLDER } from \"./Constants\";\nimport { addUser } from \"./RegisterNewUser\";\nimport { allEntries } from \"./RegisterNewUser\";\nimport Axios from 'axios';\n\nfunction validateFields(currUser, currErr) {\n  for (const [field, regexList] of Object.entries(REGEX_HOLDER)) {\n    var errorList = '';\n    regexList.forEach(regex => {\n      for (var key in regex) {\n        let curr_key = key;\n        let curr_value = regex[key];\n        let re = new RegExp(curr_key);\n\n        if (!re.test(currUser[field])) {\n          errorList = errorList + curr_value + '\\n';\n        }\n      }\n    });\n\n    if ((field == 'pass' || field == 'rePass') && currUser.pass !== currUser.rePass) {\n      errorList += '-Passwords should match!\\n';\n    }\n\n    currErr[field] = errorList;\n  }\n}\n\nexport function registerPerson(nick, firstName, lastName, pass, rePass, email, users, setInvalidRegister, setAlreadyRegistered) {\n  const currUser = {\n    nick: nick,\n    firstName: firstName,\n    lastName: lastName,\n    pass: pass,\n    rePass: rePass,\n    email: email\n  };\n  var currErr = {\n    nick: '',\n    firstName: '',\n    lastName: '',\n    pass: '',\n    rePass: '',\n    email: ''\n  };\n  validateFields(currUser, currErr);\n  const keys = Object.keys(currErr);\n  let valid_user = true;\n  keys.forEach((key, index) => {\n    if (currErr[key].length != 0) {\n      valid_user = false;\n      setInvalidRegister(currErr);\n    }\n  });\n  users.forEach(user => {\n    if (user.email === currUser.email) {\n      valid_user = false;\n      setAlreadyRegistered(true);\n    }\n  });\n\n  if (valid_user) {\n    alert(\"User registered succesfully!\");\n    setAlreadyRegistered(false);\n    Axios.post(\"http://localhost:4000/add\", {\n      user: currUser\n    }).then(() => {\n      console.log(\"User added!\");\n    });\n  }\n}\nexport default validateFields;","map":{"version":3,"sources":["C:/React_Projects/restaurant/restaurant/src/Utils/Register/RegisterValidation.js"],"names":["axios","REGEX_HOLDER","addUser","allEntries","Axios","validateFields","currUser","currErr","field","regexList","Object","entries","errorList","forEach","regex","key","curr_key","curr_value","re","RegExp","test","pass","rePass","registerPerson","nick","firstName","lastName","email","users","setInvalidRegister","setAlreadyRegistered","keys","valid_user","index","length","user","alert","post","then","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,aAA7B;AACA,SAAQC,OAAR,QAAsB,mBAAtB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,SAASC,cAAT,CAAwBC,QAAxB,EAAmCC,OAAnC,EAA2C;AACvC,OAAI,MAAM,CAACC,KAAD,EAASC,SAAT,CAAV,IAAiCC,MAAM,CAACC,OAAP,CAAeV,YAAf,CAAjC,EAA8D;AAC1D,QAAIW,SAAS,GAAG,EAAhB;AACAH,IAAAA,SAAS,CAACI,OAAV,CAAkBC,KAAK,IAAI;AACvB,WAAI,IAAIC,GAAR,IAAeD,KAAf,EAAqB;AACjB,YAAIE,QAAQ,GAAGD,GAAf;AACA,YAAIE,UAAU,GAAGH,KAAK,CAACC,GAAD,CAAtB;AACA,YAAIG,EAAE,GAAG,IAAIC,MAAJ,CAAWH,QAAX,CAAT;;AACA,YAAG,CAACE,EAAE,CAACE,IAAH,CAAQd,QAAQ,CAACE,KAAD,CAAhB,CAAJ,EAA6B;AACzBI,UAAAA,SAAS,GAAGA,SAAS,GAAGK,UAAZ,GAAyB,IAArC;AACH;AACJ;AACJ,KATD;;AAUA,QAAG,CAACT,KAAK,IAAI,MAAT,IAAmBA,KAAK,IAAI,QAA7B,KAA2CF,QAAQ,CAACe,IAAT,KAAkBf,QAAQ,CAACgB,MAAzE,EAAiF;AAC7EV,MAAAA,SAAS,IAAI,4BAAb;AACH;;AACDL,IAAAA,OAAO,CAACC,KAAD,CAAP,GAAiBI,SAAjB;AACH;AACJ;;AAED,OAAO,SAASW,cAAT,CAAwBC,IAAxB,EAA+BC,SAA/B,EAA2CC,QAA3C,EAAsDL,IAAtD,EAA6DC,MAA7D,EAAsEK,KAAtE,EAA8EC,KAA9E,EAAsFC,kBAAtF,EAA2GC,oBAA3G,EAAgI;AACnI,QAAMxB,QAAQ,GAAG;AAACkB,IAAAA,IAAI,EAAGA,IAAR;AAAeC,IAAAA,SAAS,EAAGA,SAA3B;AAAuCC,IAAAA,QAAQ,EAAGA,QAAlD;AAA6DL,IAAAA,IAAI,EAAGA,IAApE;AAA2EC,IAAAA,MAAM,EAAGA,MAApF;AAA6FK,IAAAA,KAAK,EAAGA;AAArG,GAAjB;AACA,MAAIpB,OAAO,GAAG;AAACiB,IAAAA,IAAI,EAAG,EAAR;AAAaC,IAAAA,SAAS,EAAG,EAAzB;AAA8BC,IAAAA,QAAQ,EAAG,EAAzC;AAA8CL,IAAAA,IAAI,EAAG,EAArD;AAA0DC,IAAAA,MAAM,EAAG,EAAnE;AAAwEK,IAAAA,KAAK,EAAG;AAAhF,GAAd;AACAtB,EAAAA,cAAc,CAACC,QAAD,EAAYC,OAAZ,CAAd;AAEA,QAAMwB,IAAI,GAAGrB,MAAM,CAACqB,IAAP,CAAYxB,OAAZ,CAAb;AACA,MAAIyB,UAAU,GAAG,IAAjB;AACAD,EAAAA,IAAI,CAAClB,OAAL,CAAa,CAACE,GAAD,EAAOkB,KAAP,KAAgB;AACzB,QAAG1B,OAAO,CAACQ,GAAD,CAAP,CAAamB,MAAb,IAAuB,CAA1B,EAA4B;AACxBF,MAAAA,UAAU,GAAG,KAAb;AACAH,MAAAA,kBAAkB,CAACtB,OAAD,CAAlB;AACH;AACJ,GALD;AAOAqB,EAAAA,KAAK,CAACf,OAAN,CAAesB,IAAD,IAAU;AACpB,QAAGA,IAAI,CAACR,KAAL,KAAerB,QAAQ,CAACqB,KAA3B,EAAiC;AAC7BK,MAAAA,UAAU,GAAG,KAAb;AACAF,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AACH;AACJ,GALD;;AAOA,MAAGE,UAAH,EAAc;AACVI,IAAAA,KAAK,CAAC,8BAAD,CAAL;AACAN,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACA1B,IAAAA,KAAK,CAACiC,IAAN,CAAW,2BAAX,EAAyC;AACrCF,MAAAA,IAAI,EAAG7B;AAD8B,KAAzC,EAEGgC,IAFH,CAEQ,MAAM;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACH,KAJD;AAKH;AAEJ;AAED,eAAenC,cAAf","sourcesContent":["import axios from \"axios\";\r\nimport { REGEX_HOLDER } from \"./Constants\";\r\nimport {addUser} from \"./RegisterNewUser\"\r\nimport { allEntries } from \"./RegisterNewUser\";\r\nimport Axios from 'axios';\r\n\r\nfunction validateFields(currUser , currErr){\r\n    for(const [field , regexList] of Object.entries(REGEX_HOLDER)){\r\n        var errorList = '';\r\n        regexList.forEach(regex => {\r\n            for(var key in regex){\r\n                let curr_key = key;\r\n                let curr_value = regex[key];\r\n                let re = new RegExp(curr_key)\r\n                if(!re.test(currUser[field])){\r\n                    errorList = errorList + curr_value + '\\n';\r\n                }\r\n            }\r\n        })\r\n        if((field == 'pass' || field == 'rePass') && (currUser.pass !== currUser.rePass)){\r\n            errorList += '-Passwords should match!\\n';\r\n        }\r\n        currErr[field] = errorList;\r\n    }\r\n}\r\n\r\nexport function registerPerson(nick , firstName , lastName , pass , rePass , email , users , setInvalidRegister , setAlreadyRegistered){\r\n    const currUser = {nick : nick , firstName : firstName , lastName : lastName , pass : pass , rePass : rePass , email : email};\r\n    var currErr = {nick : '' , firstName : '' , lastName : '' , pass : '' , rePass : '' , email : ''};\r\n    validateFields(currUser , currErr);\r\n    \r\n    const keys = Object.keys(currErr);\r\n    let valid_user = true;\r\n    keys.forEach((key , index) =>{\r\n        if(currErr[key].length != 0){\r\n            valid_user = false;\r\n            setInvalidRegister(currErr);\r\n        }\r\n    })\r\n\r\n    users.forEach((user) => {\r\n        if(user.email === currUser.email){\r\n            valid_user = false;\r\n            setAlreadyRegistered(true);\r\n        }\r\n    })\r\n\r\n    if(valid_user){\r\n        alert(\"User registered succesfully!\");    \r\n        setAlreadyRegistered(false);\r\n        Axios.post(\"http://localhost:4000/add\" , {\r\n            user : currUser\r\n        }).then(() => {\r\n            console.log(\"User added!\")\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport default validateFields;"]},"metadata":{},"sourceType":"module"}